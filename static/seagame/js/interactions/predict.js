(function(n,w){n.VNE=n.VNE||{};var q=interactions_url||"http://interactions.vnexpress.net",f={type:"match",predictEl:".predict-match",useCaptcha:!1},c={},m=0,k="undefined"!==typeof base_url&&"http://ngoisao.net"==base_url?1:0,e=k?"SexyAlertBox-Box-t":"SexyAlertBox-Box",g,t=function(a){a=a||{};f.predictEl=a.predictEl||f.predictEl;f.useCaptcha=a.useCaptcha||f.useCaptcha;f=$.extend(f,a);$("#"+e).find("button.btt-complete-predict").live("click",function(b){b.preventDefault();if(!$(this).hasClass("inactive")){b=
    $("#"+e+' input[name="amount"]');var a=b.val();if(""==a||"D\u1ef1 \u0111o\u00e1n s\u1ed1 ng\u01b0\u1eddi b\u00ecnh ch\u1ecdn gi\u1ed1ng b\u1ea1n"==a)$("#"+e+" .amount_error").html("D\u1ef1 \u0111o\u00e1n s\u1ed1 ng\u01b0\u1eddi kh\u00f4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),b.focus();else{var d=a.replace(/[^0-9]/g,"");if(0==d.length||d!=a)$("#"+e+" .amount_error").html("D\u1ef1 \u0111o\u00e1n s\u1ed1 ng\u01b0\u1eddi kh\u00f4ng h\u1ee3p l\u1ec7"),b.focus();else if(a=parseInt(a),0>a||2147483647<
    a)$("#"+e+" .amount_error").html("D\u1ef1 \u0111o\u00e1n s\u1ed1 ng\u01b0\u1eddi kh\u00f4ng h\u1ee3p l\u1ec7"),b.focus();else{$("#"+e+" .amount_error").html("");c.num_people=a;if(f.useCaptcha){b=$("#"+e+" #txtCaptchavote");c.text=b.val();if("undefined"!=typeof c.text&&c.text.length)$("#"+e+" .captcha_error").html(""),$("#"+e+" .captcha_error").hide();else{$("#"+e+" .captcha_error").html("M\u00e3 b\u1ea3o m\u1eadt nh\u1eadn kh\u00f4ng \u0111\u00fang");$("#"+e+" .captcha_error").show();b.focus();return}c.code=
    $("#"+e+" #captchaID").val()}s()}}}});f.useCaptcha&&$("#"+e+" #change-image").live("click",function(b){b.preventDefault();p()})},u=function(a,b,c){b=b||{};b.data=b.data||{};a=q+"/"+a+"?callback=?";$.getJSON(a,b).done(function(b){"function"==typeof c&&c(b)})},l=function(a,b){k?"undefined"!=typeof PredictSexy?PredictSexy.alert('<div id="sx_box_guess_worldcup"><div class="title">'+b+'</div><div class="body"><p>'+a+"</p></div></div>"):alert(a):"undefined"!=typeof Sexy?Sexy.notice('<div class="light_box trandau"><div class="title close_box"><span>'+
    b+'</span> <i class="ico close right"></i><div class="clear"></div></div> <div class="body">  <p>'+a+"</p> </div></div>"):alert(a)},v=function(){var a,b,h,d;6==c.type?(b=c.goal_team1+" - "+c.goal_team2,a="B\u1ea1n \u0111\u00e3 d\u1ef1 \u0111o\u00e1n tr\u1eadn "+c.msg,g.find('input[data-rel="'+c.match_id+'-team1"]').val(""),g.find('input[data-rel="'+c.match_id+'-team2"]').val(""),h="D\u1ef1 \u0111o\u00e1n t\u1ef7 s\u1ed1 tr\u1eadn \u0111\u1ea5u",d="T\u1ed5ng s\u1ed1 ng\u01b0\u1eddi d\u1ef1 \u0111o\u00e1n tr\u1eadn \u0111\u1ea5u"):
    4==c.type?(b=g.find(".predict-match-4 option:selected").text(),a="B\u1ea1n d\u1ef1 \u0111o\u00e1n \u0111\u1ed9i v\u00f4 \u0111\u1ecbch l\u00e0",h="D\u1ef1 \u0111o\u00e1n \u0111\u1ed9i v\u00f4 \u0111\u1ecbch",d="S\u1ed1 ng\u01b0\u1eddi d\u1ef1 \u0111o\u00e1n gi\u1ed1ng b\u1ea1n"):5==c.type&&(b=g.find(".predict-match-5 option:selected").text(),a="B\u1ea1n d\u1ef1 \u0111o\u00e1n Vua ph\u00e1 l\u01b0\u1edbi l\u00e0",h="D\u1ef1 \u0111o\u00e1n Vua ph\u00e1 l\u01b0\u1edbi",d="S\u1ed1 ng\u01b0\u1eddi d\u1ef1 \u0111o\u00e1n gi\u1ed1ng b\u1ea1n");
    k?(a='<div id="sx_box_guess_worldcup"><div class="title">'+h+'</div><div class="body"><p>'+a+": <strong>"+b+"</strong>.</p><p>Th\u1eddi gian d\u1ef1 \u0111o\u00e1n s\u1ebd k\u1ebft th\u00fac "+(6!=c.type?"tr\u01b0\u1edbc khi tr\u1eadn Chung k\u1ebft b\u1eaft \u0111\u1ea7u":"ngay khi b\u1eaft \u0111\u1ea7u hi\u1ec7p 2")+' (<a href="http://worldcup.vnexpress.net/du-doan" style="color:#004f8b;text-decoration: underline; " target="_blank">Th\u1ec3 l\u1ec7 chi ti\u1ebft</a>).</p><p>'+d+'?</p><div class="form-group"><input type="text" class="txt-capcha" name="amount"><div class="error amount_error"></div></div>',
        f.useCaptcha&&(a+='<div class="form-group code"><label>M\u00e3 b\u1ea3o m\u1eadt</label><input type="text" maxlength="4" class="txt-capcha" id="txtCaptchavote"><div class="input_capcha" id="showCaptcha-predict" style="width:77px;"></div><a class="btn-refresh" id="change-image"><img src="http://st.f1.vnecdn.net/responsive/images/refesh.gif"></a><div class="error captcha_error"></div></div>'),a+='<div class="form-group"><button type="submit" class="btn-send btt-complete-predict">G\u1eedi</button></div></div><div id="msg"></div></div>',
        "undefined"!=typeof PredictSexy?(PredictSexy.alert(a),setTimeout(function(){$("#"+e+' input[name="amount"]').focus()},500)):alert("Sexy alert not defined")):(a='<div class="light_box trandau"><div class="title close_box"><span>'+h+'</span> <i class="ico close right"></i><div class="clear"></div></div><div class="body">          <p>'+a+": <strong>"+b+'</strong>.</p>            <div class="block_maxacnhan">               <p class="width_common txt_maxacnhan">Th\u1eddi gian d\u1ef1 \u0111o\u00e1n s\u1ebd k\u1ebft th\u00fac '+
        (6!=c.type?"tr\u01b0\u1edbc khi tr\u1eadn Chung k\u1ebft b\u1eaft \u0111\u1ea7u":"ngay khi b\u1eaft \u0111\u1ea7u hi\u1ec7p 2")+' (<a href="http://worldcup.vnexpress.net/du-doan" style="color:#004f8b;text-decoration: underline; " target="_blank">Th\u1ec3 l\u1ec7 chi ti\u1ebft</a>).</p>               <p class="width_common txt_maxacnhan">'+d+'?</p>                <div class="block_inputconfirmcapcha">                <div class="left block_txt_capcha"><input type="'+("undefined"!=typeof device_env&&
        4!=device_env?"number":"text")+'" class="txt-capcha" name="amount"></div>                <p class="login-desc amount_error width_common" style="padding-top:5px;"></p>',f.useCaptcha&&(a+='                <p class="width_common txt_maxacnhan">M\u00e3 b\u1ea3o m\u1eadt</p>                <div class="block_inputconfirmcapcha">                <div class="left block_txt_capcha"><input type="text" maxlength="4" class="txt-capcha" id="txtCaptchavote"></div>                 <div class="input_capcha left" id="showCaptcha-predict" style="width:77px;"></div>                <a class="left icon_refest" id="change-image"><img src="http://st.f1.vnecdn.net/responsive/images/refesh.gif"></a>                                        </div>                 <p class="login-desc captcha_error width_common" style="display:none;"></p>'),
        a+='                 <div class="width_common">                 <button type="submit" class="btn_goi btt-complete-predict">G\u1eedi</button>                 </div>            </div>     <div id="msg" class="width_common"></div></div><div class="clear">&nbsp;</div>  </div></div>',"undefined"!=typeof Sexy?(Sexy.notice(a),setTimeout(function(){$("#"+e+' input[name="amount"]').focus()},500)):alert("Sexy alert not defined"))},p=function(){$.getJSON(q+"/captcha/show?callback=?",{deviceenv:1},function(a){$("#"+
    e+" #showCaptcha-predict").html(a.html)})},r=function(){k?PredictSexy.display(0):(Sexy.display(0),$("#BoxOverlay").hide());m=0},s=function(){m=1;u("predict/generatecode",c,function(a){a.error||(6==c.type?($('input[data-rel="'+c.match_id+'-team1"]').val(""),$('input[data-rel="'+c.match_id+'-team2"]').val("")):4==c.type?$(".predict-match-4 option:selected").text():5==c.type&&$(".predict-match-5 option:selected").text(),f.useCaptcha&&p(),f.useCaptcha&&$("#"+e+" #txtCaptchavote").val(""));var b="";if(0==
    a.error){var h,d;6==c.type?h="t\u1ed5ng s\u1ed1 ng\u01b0\u1eddi d\u1ef1 \u0111o\u00e1n tr\u1eadn \u0111\u1ea5u":4==c.type?h="s\u1ed1 ng\u01b0\u1eddi d\u1ef1 \u0111o\u00e1n gi\u1ed1ng b\u1ea1n":5==c.type&&(h="s\u1ed1 ng\u01b0\u1eddi d\u1ef1 \u0111o\u00e1n gi\u1ed1ng b\u1ea1n");"undefined"!=typeof device_env&&4!=device_env?navigator.userAgent.match(/(iPod|iPhone|iPad)/)?(b="M\u1eddi b\u1ea1n nh\u1eafn tin v\u1edbi c\u00fa ph\u00e1p:",d=""):navigator.userAgent.match(/iemobile/)||navigator.userAgent.match(/Windows Phone/)?
    (b="M\u1eddi b\u1ea1n nh\u1eafn tin v\u1edbi c\u00fa ph\u00e1p:",d=""):(b='<a href="sms:8500?body=WC '+a.data.predict_code+'" style="color:#004F8B;">Click \u0111\u00e2y \u0111\u1ec3 nh\u1eafn tin d\u1ef1 \u0111o\u00e1n.</a>',d="Ho\u1eb7c nh\u1eafn tin v\u1edbi c\u00fa ph\u00e1p: "):(b="M\u1eddi b\u1ea1n nh\u1eafn tin v\u1edbi c\u00fa ph\u00e1p: ",d="");b="<p>B\u1ea1n \u0111\u00e3 d\u1ef1 \u0111o\u00e1n "+h+": <strong>"+c.num_people+'</strong>.</p><p>M\u00e3 x\u00e1c nh\u1eadn: <strong class="text_red">'+
    a.data.predict_code+"</strong>. "+b+"</p><p "+(0<d.length?"":'class="txt_huongdanmsm"')+">"+d+'<strong class="text_green">WC</strong>  <strong class="text_red">'+a.data.predict_code+'</strong>  g\u1eedi  <strong class="text_green">8500</strong></p><p>\u0111\u1ec3 ho\u00e0n t\u1ea5t d\u1ef1 \u0111o\u00e1n (5000 \u0111\u1ed3ng/ tin nh\u1eafn).</p>';$("#"+e).find("button.btt-complete-predict").addClass("inactive")}else 10==a.error?($("#"+e+" p.captcha_error").html("M\u00e3 b\u1ea3o m\u1eadt kh\u00f4ng \u0111\u00fang"),
    $("#"+e+" p.captcha_error").show()):b='<p style="padding-top:10px;" class="login-desc amount_error width_common">'+a.errorDescription+"</p>";$("#"+e+" #msg").html(b);m=0})};n.VNE.Predict={};VNE.Predict.init=function(a){t(a);$("i.close").live("click",function(b){b.preventDefault();r()});"undefined"!=typeof device_env&&4!=device_env&&$("div.title.close_box").live("click touchstart",function(b){b.preventDefault();r()});$(".go-predict-match").bind("click",function(){$('input[data-rel="'+$(this).data("rel")+
    '-team1"]').focus()});$(f.predictEl).bind("click",function(b){b.preventDefault();if(1!=m){b=$(this);g=b.closest(".width_common");var a=b.data("rel"),d=b.data("predict-type");c={type:d};if(6==d){c.time_happen=b.data("time");if("undefined"==typeof c.time_happen||0==c.time_happen.length)c.time_happen=0;if(60<c.time_happen){l("\u0110\u00e3 h\u1ebft th\u1eddi gian d\u1ef1 \u0111o\u00e1n tr\u1eadn \u0111\u1ea5u <br/>Th\u1eddi gian d\u1ef1 \u0111o\u00e1n s\u1ebd k\u1ebft th\u00fac "+(6!=c.type?"tr\u01b0\u1edbc khi tr\u1eadn Chung k\u1ebft b\u1eaft \u0111\u1ea7u":
    "ngay khi b\u1eaft \u0111\u1ea7u hi\u1ec7p 2")+' (<a href="http://worldcup.vnexpress.net/du-doan" target="_blank" style="color:#004f8b;text-decoration: underline;">Th\u1ec3 l\u1ec7 chi ti\u1ebft</a>)',"D\u1ef1 \u0111o\u00e1n World Cup 2014");return}c.match_id=b.data("rel");var e=g.find('input[data-rel="'+a+'-team1"]').val(),k=g.find('input[data-rel="'+a+'-team2"]').val();if(""==e||""==k){l("B\u1ea1n ch\u01b0a nh\u1eadp t\u1ef7 s\u1ed1","D\u1ef1 \u0111o\u00e1n World Cup 2014");return}a=e.replace(/[^0-9]/g,
    "");d=k.replace(/[^0-9]/g,"");if(""==a||""==d||a!=e||d!=k){l("T\u1ef7 s\u1ed1 kh\u00f4ng h\u1ee3p l\u1ec7","D\u1ef1 \u0111o\u00e1n World Cup 2014");return}a=parseInt(a);d=parseInt(d);c.goal_team1=a;c.goal_team2=d;b=b.data("predict-text");b=b.split("vs");c.message=b[0]+a+"-"+d+b[1];c.msg=b[0]+" vs "+b[1]}else if(4==d){b=parseInt(g.find(".predict-match-4").val());if(0>=b){l("B\u1ea1n ch\u01b0a ch\u1ecdn \u0111\u1ed9i v\u00f4 \u0111\u1ecbch","D\u1ef1 \u0111o\u00e1n World Cup 2014");return}c.match_id=
    b;c.message=g.find(".predict-match-4 option:selected").text()}else if(5==d){b=parseInt(g.find(".predict-match-5").val());if(0>=b||isNaN(b)){l("B\u1ea1n ch\u01b0a ch\u1ecdn vua ph\u00e1 l\u01b0\u1edbi","D\u1ef1 \u0111o\u00e1n World Cup 2014");return}c.match_id=b;c.message=g.find(".predict-match-5 option:selected").text()+" doi "+$(".parent-predict-match-5 option:selected").text()}v();f.useCaptcha&&p()}})}})(window,document);
$(function(){VNE.Predict.init({predictEl:".predict-match",useCaptcha:"undefined"!=typeof predict_with_captcha?predict_with_captcha:0})});